<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>Analyzing the ingredients of 29k recipes | Skip The Pizza</title>
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://skipthepizza.com/blog/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://skipthepizza.com/blog/wp-content/themes/twentythirteen/js/html5.js"></script>
	<![endif]-->
	<link rel="alternate" type="application/rss+xml" title="Skip The Pizza » Feed" href="http://skipthepizza.com/blog/feed/">
<link rel="alternate" type="application/rss+xml" title="Skip The Pizza » Comments Feed" href="http://skipthepizza.com/blog/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Skip The Pizza » Analyzing the ingredients of 29k recipes Comments Feed" href="http://skipthepizza.com/blog/analyzing-the-ingredients-of-29200-recipes/feed/">
<link rel="stylesheet" id="twentythirteen-fonts-css" href="Analyzing%20the%20ingredients%20of%2029k%20recipes%20%7C%20Skip%20The%20Pizza_files/css.css" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="Analyzing%20the%20ingredients%20of%2029k%20recipes%20%7C%20Skip%20The%20Pizza_files/genericons.css" type="text/css" media="all">
<link rel="stylesheet" id="twentythirteen-style-css" href="Analyzing%20the%20ingredients%20of%2029k%20recipes%20%7C%20Skip%20The%20Pizza_files/style.css" type="text/css" media="all">
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentythirteen-ie-css'  href='http://skipthepizza.com/blog/wp-content/themes/twentythirteen/css/ie.css?ver=2013-07-18' type='text/css' media='all' />
<![endif]-->
<script type="text/javascript" src="Analyzing%20the%20ingredients%20of%2029k%20recipes%20%7C%20Skip%20The%20Pizza_files/jquery.js"></script>
<script type="text/javascript" src="Analyzing%20the%20ingredients%20of%2029k%20recipes%20%7C%20Skip%20The%20Pizza_files/jquery-migrate.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://skipthepizza.com/blog/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://skipthepizza.com/blog/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 3.9.1">
<link rel="canonical" href="http://skipthepizza.com/blog/analyzing-the-ingredients-of-29200-recipes/">
<link rel="shortlink" href="http://skipthepizza.com/blog/?p=5">
	<style type="text/css" id="twentythirteen-header-css">
			.site-header {
			background: url(http://skipthepizza.com/blog/wp-content/themes/twentythirteen/images/headers/circle.png) no-repeat scroll top;
			background-size: 1600px auto;
		}
		</style>
	</head>

<body class="single single-post postid-5 single-format-standard single-author">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header" role="banner">
			<a class="home-link" href="http://skipthepizza.com/blog/" title="Skip The Pizza" rel="home">
				<h1 class="site-title">Skip The Pizza</h1>
				<h2 class="site-description"></h2>
			</a>

			<div id="navbar" class="navbar">
				<nav id="site-navigation" class="navigation main-navigation" role="navigation">
					<h3 class="menu-toggle" style="display: none;">Menu</h3>
					<a class="screen-reader-text skip-link" href="#content" title="Skip to content">Skip to content</a>
					<div class="nav-menu"></div>
					<form role="search" method="get" class="search-form" action="http://skipthepizza.com/blog/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input class="search-field" placeholder="Search …" name="s" title="Search for:" type="search">
				</label>
				<input class="search-submit" value="Search" type="submit">
			</form>				</nav><!-- #site-navigation -->
			</div><!-- #navbar -->
		</header><!-- #masthead -->

		<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">

						
				
<article id="post-5" class="post-5 post type-post status-publish format-standard hentry category-uncategorized">
	<header class="entry-header">
		
				<h1 class="entry-title">Analyzing the ingredients of 29k recipes</h1>
		
		<div class="entry-meta">
			<span class="date"><a href="http://skipthepizza.com/blog/analyzing-the-ingredients-of-29200-recipes/" title="Permalink to Analyzing the ingredients of 29k recipes" rel="bookmark"><time class="entry-date" datetime="2012-07-27T09:01:35+00:00">July 27, 2012</time></a></span><span class="categories-links"><a href="http://skipthepizza.com/blog/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a></span><span class="author vcard"><a class="url fn n" href="http://skipthepizza.com/blog/author/admin/" title="View all posts by SkipThePizza" rel="author">SkipThePizza</a></span>					</div><!-- .entry-meta -->
	</header><!-- .entry-header -->

		<div class="entry-content">
		<p>I love cooking. In fact I’m trying to cook as often as possible. 
Another passion of mine – which happens to be as well my job – is 
software engineering. The other day i asked myself if and how I could 
combine these two. I came up with an idea about a little web application
 which is since then my side project on rainy weekends – aka 
SkipThePizza. I will write about the application later on, first i’ll 
stick to what i did so far and the results i got.</p>
<p>This and the following blog post(s) will describe how i analyzed the 
ingredients of 29200 recipes and what i learned from that. If you like 
what I’m doing please share, follow or comment. Feedback is highly 
appreciated.</p>
<p><span id="more-5"></span></p>
<h2>What are we looking for?</h2>
<p>A main feature of the upcoming application is a recommendation engine
 for ingredients. The algorithm should be able to propose ingredients 
based on popularity and based on which ingredients we already chose. 
Technically it comes down to the following questions:</p>
<ul>
<li><strong>How many ingredients does a typical recipe consist of?</strong></li>
<li><strong>Which are the most frequent ingredients?</strong></li>
<li><strong>Which are the most frequent combinations of ingredients?</strong></li>
<li><strong>Given a set of ingredients, which other ingredients go probably along with it?</strong></li>
</ul>
<p>If you think this sounds familiar to you, maybe you already read articles about <a href="http://en.wikipedia.org/wiki/N-gram">n-grams</a>&nbsp;related
 to other domains. Traditionally, n-grams are used to describe a 
continuous sequence of letters or words inside a text. Once a set of 
n-grams is extracted from a text, a probabilistic model of the text can 
be computed. This model can then be used to determine the probability of
 the transition from one letter to another.</p>
<p>There are other excellent articles related to this topic, for example the ones of Dave from <a href="http://www.hooktheory.com/" target="_blank">hooktheory</a>. His work is about <a href="http://www.hooktheory.com/blog/i-analyzed-the-chords-of-1300-popular-songs-for-patterns-this-is-what-i-found/" target="_blank">musical</a> <a href="http://www.hooktheory.com/blog/music-theory-analysis-1300-songs-for-songwriting-part2/">progressions</a> but the underlying math is more or less a more complex version of what I was doing with recipes and ingredients.</p>
<p>In the case of ingredients and recipes, there is one big difference 
to the work stated above though: I’m not necessarily looking at a 
continuous sequence. I don’t care whether tomatoes are mentioned first 
and then potatoes or the other way around. What I’m looking at is simply
 the fact that they both occur in the same recipe.</p>
<h2>What kind of data do we process?</h2>
<p>As always, you need a lot of data if you want to generate 
quantitative statements. Obviously there are a lot of cooking websites 
which have huge amounts of data available. Unfortunately, most of them 
are not really into sharing their data and I would not like to risk any 
trouble by scraping their websites. After some search I stumbled on <a href="http://recipes.wikia.com/" target="_blank">Wikia Recipes</a>. Perfect! It’s a sufficient amount of data with over <a href="http://recipes.wikia.com/wiki/Special:Statistics" target="_blank">40k</a>&nbsp; content pages and all provided under the Creative Commons license.</p>
<p>You might ask if the quality of the data is any good and if the set 
of recipes is representative. Well, this question is not really easy to 
answer.&nbsp;Browsing through the recipes on wikia I got the impression 
that the majority of the recipes is well written. According to the stats
 of the <a href="http://recipes.wikia.com/wiki/Special:Statistics" target="_blank">wiki</a>,
 there are 51 active users managing the data right now from which 25 are
 marked as wikia staff. Let’s just say the quality of the data is good!</p>
<p>I need to confess that as a European I’m not aware of all ingredients in the data set. I have really no idea how a <em>vegetable spray</em> or <em>milk chips</em> could taste like. And for sure there are some other things I never heard about.</p>
<h2>Preprocessing the Data</h2>
<p>The recipes are stored as wiki markup language inside a single <a href="http://recipes.wikia.com/wiki/Special:Statistics">XML file</a>. Besides recipes, the xml includes a page for each ingredient and for each category. This is how a typical recipe looked like:</p>
<blockquote><p>* Makes 6 to 8 servings</p>
<p><span>== Ingredients ==</span><br>
* 2 tbsp extra virgin [[olive oil]]<br>
* 3 cloves [[garlic]], finely chopped<br>
* 1½ pounds fresh ripe [[tomato]]es, seeded and chopped (about 3 cups)<br>
* 1 tbsp [[tomato paste]]<br>
* 1 tsp dried [[oregano]]<br>
* ⅛ tsp [[ground red pepper]]<br>
* ½ cup pitted brine cured [[black olives]] coarsely chopped<br>
* 2 tbsp [[capers]]<br>
* [[salt]] and [[pepper]]<br>
* 1 pkg. thin [[spaghetti]] (16 oz)<br>
* grated [[Parmesan cheese]]</p>
<p><span>== Directions ==</span><br>
Heat olive oil and garlic in large skillet over low heat until garlic begins to sizzle.<br>
Add tomatoes, tomato paste, oregano and red pepper; simmer, uncovered, until sauce is thickened, about 15 minutes.<br>
Add olives, capers and salt and pepper to taste.<br>
Toss spaghetti with sauce.<br>
Sprinkle with cheese before serving.</p>
<p>[[Category:Cathy's Recipes]]<br>
[[Category:Garlic Recipes]]<br>
[[Category:Tomato Recipes]]<br>
[[Category:Black olive Recipes]]<br>
[[Category:Caper Recipes]]<br>
[[Category:Spaghetti Recipes]]<br>
[[Category:Parmesan cheese Recipes]]<br>
[[Category:Tomato paste Recipes]]</p></blockquote>
<p>As you can see, a recipe has more or less a clear structure and with 
some regex magic it should be possible to identify the recipe pattern 
and extract the ingredients. As you also can see, some of the 
ingredients contain the information that they are a synonym to another 
ingredient. This is great as it reduces the set of real ingredients and 
thus leads to more accurate results later on.</p>
<p>The next step was to write some scripts which transform the original 
XML file into a relational database which will be used for further 
processing. After processing all pages I ended up with a set of data 
which has the following key values:</p>
<table class="resultTable">
<tbody>
<tr>
<td class="label">Total number of recipes:</td>
<td class="value">29 920</td>
</tr>
<tr>
<td class="label">Unique ingredients</td>
<td class="value">4254</td>
</tr>
<tr>
<td class="label">Ingredient marked as synonym:</td>
<td class="value">2564</td>
</tr>
</tbody>
</table>
<h2>First result: How much ingredients does a typical recipe consist of?</h2>
<p>It’s difficult to say when you can call a combination of ingredients 
already a recipe. Does mixing two ingredients really count as a recipe? 
Is milk + chocolate or garlic + butter a recipe? Maybe yes, maybe not. 
The most complex recipe in the database consists of 42 ingredients – 
it’s a Casserole and i really should give it a try once i have plenty of
 free time. As you can see in the following chart, the answer to how 
much ingredients a typical recipe consists of lies at around 8-10. This 
might be a little bit higher as expected but you need to take in account
 that really all ingredients are counted. This means also basic things 
like water and salt.</p>
<p><img src="Analyzing%20the%20ingredients%20of%2029k%20recipes%20%7C%20Skip%20The%20Pizza_files/chart.png" alt="Recipes Grouped by Amount of Ingredients" width="500" height="360"></p>
<p>If you read that far you probably want to read the follow up on this post. The next post will cover the following questions:</p>
<ul>
<li>Which are the most frequent ingredients?</li>
<li>Which are the most frequent combinations of ingredients?</li>
<li>Given a set of ingredients, which other ingredients go probably along with it?</li>
</ul>
<p>Follow me or subscribe to my mailing list and you won’t miss any upcoming article. In the mean time, feel free to comment!</p>
			</div><!-- .entry-content -->
	
	<footer class="entry-meta">
		
			</footer><!-- .entry-meta -->
</article><!-- #post -->
								
<div id="comments" class="comments-area">

	
									<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://skipthepizza.com/blog/analyzing-the-ingredients-of-29200-recipes/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://skipthepizza.com/blog/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate="">
																			<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" size="30" aria-required="true" type="text"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" size="30" aria-required="true" type="email"></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" size="30" type="url"></p>
												<p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a
 href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; 
&lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del 
datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;strike&gt; 
&lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" id="submit" value="Post Comment" type="submit">
							<input name="comment_post_ID" value="5" id="comment_post_ID" type="hidden">
<input name="comment_parent" id="comment_parent" value="0" type="hidden">
						</p>
											</form>
							</div><!-- #respond -->
			
</div><!-- #comments -->
			
		</div><!-- #content -->
	</div><!-- #primary -->


		</div><!-- #main -->
		<footer id="colophon" class="site-footer" role="contentinfo">
			
			<div class="site-info">
								<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

	<script type="text/javascript" src="Analyzing%20the%20ingredients%20of%2029k%20recipes%20%7C%20Skip%20The%20Pizza_files/comment-reply.js"></script>
<script type="text/javascript" src="Analyzing%20the%20ingredients%20of%2029k%20recipes%20%7C%20Skip%20The%20Pizza_files/functions.js"></script>

</body></html>